<div class="container">
  <h1 class="mt-3 mb-4">עגלת קניות</h1>
  <ng-container *ngIf="cart">
    <ng-container *ngIf="numProducts() > 0; else noCart">
      <div class="row text-right">
        <div class="col-12">
          <button class="btn btn-primary mr-2 my-1" (click)="clearAll()">רוקן עגלה</button>
          <a class="btn btn-outline-primary mr-2 my-1" (click)="submitOrder()">להזמנה</a>
          <p class="text-primary d-inline-block mr-2 my-1">יש לך {{numProducts()}} פריטים בעגלה</p>
        </div>
      </div>
      <div class="row">
        <table class="table text-right">
          <thead>
          <tr>
            <th></th>
            <th class="text-right">מוצר</th>
            <th class="text-right" >כמות</th>
            <th class="text-right">מחיר</th>
            <th class="text-right">סה"כ</th>
            <th class="text-right" *ngIf="discount" style="width:20%">לאחר הנחה עבורך!!</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let item of cart.products">
            <td>
              <!-- <button class="btn btn-outline-secondary m-1 px-2 px-2">+</button>
              <button class="btn btn-outline-secondary m-1 px-2 px-2">-</button> -->
              <!-- <span class="w-50"><button class="btn btn-outline-secondary mx-1 py-1 px-2">+</button></span>
              <span class="w-50"><button class="btn btn-outline-secondary mx-1 py-1 px-2">-</button></span> -->
              <div class="d-inline-block p-1">
                <button class="btn btn-outline-secondary mx-1 py-1 px-2  plus_cart" title="הסר מהעגלה"
                        (click)='deleteProduct(item.Product)'>x
                </button>
              </div>
              <div class="d-inline-block p-1">
                <button class="btn btn-outline-secondary mx-1 py-1 px-2  plus_cart" title="הוסף יחידה"
                        (click)='addToCart(item.Product)'>+
                </button>
              </div>
              <div class="d-inline-block p-1">
                <button class="btn btn-outline-secondary mx-1 py-1 px-2  minus_cart" title="הורד יחידה"
                        (click)='removeOneProduct(item.Product)'>-
                </button>
              </div>
              <!-- <div class="thumbnail" [style.backgroundImage]="'url('+ item.imageUrl +')'"></div> -->
            </td>
            <td>{{item.Product.Name}}</td>
            <td>
              <!--כמות-->
              <!--<product-quantity [product]="item" [shopping-cart]="cart" [msg]="null"></product-quantity> -->
              {{item.Amount}}
            </td>
            <td>
              <!--מחיר-->
              {{item.Product.SellingPrice + " ש\"ח" }}</td>

            <td>
              <!--סה"כ-->
              {{item.Product.SellingPrice * item.Amount + " ש\"ח" }}
            </td>

            <td *ngIf="discount">
              <!--לאחר הנחה-->
              {{  item.Product.SellingPrice+ " ש\"ח"  + "*" + item.Amount +  "*" + ((100 - discount)/100) +"%" + "  =  " +  item.Product.SellingPrice * item.Amount *(100-discount)/100 + " ש\"ח" }}
            </td>

          </tr>
          </tbody>
          <tfoot>
          <tr class="table-secondary">
            <th colspan="3" class="px-4">מחיר סופי:</th>
            <th></th>
            <!-- <th class="text-right px-4">{{cart.cartTotal    + " ש\"ח"}}</th> -->
            <th class="text-right px-4">{{cart.cartTotal + " ש\"ח"}}</th>
            <th class="text-right px-4" *ngIf="discount">{{cart.cartTotal * ((100 - discount)/100) + " ש\"ח"}}</th>
          </tr>
          </tfoot>
        </table>

      </div>
      <div class="my-2 float-left ">
        <button class="btn btn-primary mr-2" (click)="clearAll()">רוקן עגלה</button>
        <a class="btn btn-outline-primary mx-2" (click)="submitOrder()">להזמנה</a>
      </div>
      <div class="clearfix"></div>
    </ng-container>

  </ng-container>


  <ng-template #noCart>
    <p>איו לך פריטים בעגלה</p>

  </ng-template>
</div>
